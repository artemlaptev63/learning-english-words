import {
  FETCH_WORDS_START,
  FETCH_WORDS_SUCCESS,
  FETCH_WORDS_FAILURE,
  ADD_ANSWER,
  CHECK_ANSWER
} from 'actionTypes'

const initialState = {}

export default (state = initialState, { type, payload }) => {
  switch (type) {
    case FETCH_WORDS_START:
      return {
        ...state,
        words: [],
        isFetching: true,
        isUploaded: false,
      }
    case FETCH_WORDS_SUCCESS:
      return {
        ...state,
        words: payload,
        isFetching: false,
        isUploaded: true
      }
    case FETCH_WORDS_FAILURE:
      return {
        ...state,
        isFetching: false,
        error: true,
        isUploaded: false
      }
    case ADD_ANSWER:
      const indexItem = state.words.findIndex(item => item.id === payload.id)
      state.words[indexItem].answer = payload.answer
      return {
        ...state
      }
    case CHECK_ANSWER:
      for (let i = 0; i < state.words.length; i++) {
        if (state.words[i].english.toLowerCase() === state.words[i].answer.toLowerCase()) {
          state.words[i].isCorrect = 'correct'
        } else {
          state.words[i].isCorrect = 'incorrect'
        }
      }
      return {
        ...state
      }
    default:
      return state
  }
}